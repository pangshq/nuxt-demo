{"file":"_code_-C11A_U1d.js","mappings":"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","names":["_withAsyncContext","_ssrRenderAttrs","_mergeProps","_unref","_push","_parent","_ssrInterpolate","_","_scopeId","_createVNode","_ssrRenderList","_createTextVNode","_toDisplayString"],"sources":["../../../../../../../components/FundLineChart.vue","../../../../../../../components/EChartBase.vue","../../../../../../nuxt/dist/app/compat/interval.js","../../../../../../../pages/fund/[code].vue"],"sourcesContent":["<script setup lang=\"ts\">\n// Lightweight ECharts wrapper that only runs on client.\n// Props: x-axis labels and multiple numeric series (as percentages).\nimport type { Ref } from 'vue'\n\ntype LineSeries = {\n  name: string\n  data: number[]\n  color?: string\n  area?: boolean\n}\n\nconst props = withDefaults(defineProps<{\n  x: string[]\n  series: LineSeries[]\n  height?: number | string\n  // When used inside tabs, tell the chart whether it is currently visible\n  visible?: boolean\n}>(), {\n  visible: true,\n})\n\nconst chartEl: Ref<HTMLDivElement | null> = ref(null)\nlet chart: any // typed lazily after dynamic import\nlet ro: ResizeObserver | null = null\n\nconst dispose = () => {\n  if (chart) {\n    chart.dispose()\n    chart = null\n  }\n}\n\nconst waitForSize = async () => {\n  if (!process.client || !chartEl.value) return\n  let tries = 0\n  // Wait until element has layout width (avoid 0-width init)\n  while (chartEl.value && chartEl.value.clientWidth === 0 && tries < 30) {\n    await new Promise((r) => requestAnimationFrame(r))\n    tries++\n  }\n}\n\nconst render = async () => {\n  if (!process.client) return\n  if (!chartEl.value) return\n  if (!props.visible) return\n\n  // Lazy import on client to avoid SSR issues\n  const echarts = await import('echarts')\n\n  // Init or reuse\n  await waitForSize()\n  chart = chart || echarts.init(chartEl.value, undefined, { renderer: 'canvas' })\n\n  const colors = props.series.map((s) => s.color).filter(Boolean) as string[]\n  const option = {\n    color: colors.length ? colors : undefined,\n    grid: { left: 12, right: 12, top: 16, bottom: 24, containLabel: true },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: { type: 'line' },\n      valueFormatter: (v: number) => `${v.toFixed(2)}%`,\n    },\n    xAxis: {\n      type: 'category',\n      boundaryGap: false,\n      data: props.x,\n      axisLine: { show: false },\n      axisTick: { show: false },\n      axisLabel: { color: '#999' },\n    },\n    yAxis: {\n      type: 'value',\n      axisLabel: { formatter: '{value}%', color: '#999' },\n      splitLine: { lineStyle: { color: '#eee' } },\n    },\n    series: props.series.map((s) => ({\n      type: 'line',\n      name: s.name,\n      data: s.data,\n      smooth: true,\n      symbol: 'none',\n      lineStyle: { width: 2 },\n      areaStyle: s.area\n        ? {\n            opacity: 0.15,\n          }\n        : undefined,\n    })),\n    legend: {\n      top: 0,\n      icon: 'circle',\n      itemWidth: 8,\n      itemHeight: 8,\n      textStyle: { color: '#666' },\n    },\n  }\n\n  chart.setOption(option, true)\n  chart.resize()\n}\n\nonMounted(() => {\n  // Only render when visible to avoid 0-width init\n  if (props.visible) {\n    // ensure layout is ready\n    requestAnimationFrame(() => requestAnimationFrame(() => render()))\n  }\n  const onResize = () => chart && chart.resize()\n  window.addEventListener('resize', onResize)\n  // Observe element size changes\n  if ('ResizeObserver' in window && chartEl.value) {\n    ro = new ResizeObserver(() => chart && chart.resize())\n    ro.observe(chartEl.value)\n  }\n  onUnmounted(() => {\n    window.removeEventListener('resize', onResize)\n    if (ro) ro.disconnect()\n    dispose()\n  })\n})\n\n// Re-render when props change\nwatch(\n  () => ({ x: props.x, s: props.series }),\n  () => render(),\n  { deep: true }\n)\n\n// When becoming visible (e.g., switching tabs), trigger a deferred resize\nwatch(\n  () => props.visible,\n  async (v) => {\n    if (!process.client) return\n    if (v) {\n      await nextTick()\n      // Double rAF ensures layout after Vant tab transitions\n      requestAnimationFrame(() => requestAnimationFrame(() => render()))\n    }\n  }\n)\n\n// Clean up on Vite HMR to avoid duplicate instances\nif (import.meta && (import.meta as any).hot) {\n  ;(import.meta as any).hot.dispose(() => dispose())\n}\n</script>\n\n<template>\n  <client-only>\n    <div ref=\"chartEl\" :style=\"{ height: (height ?? 260) + 'px', width: '100%' }\" />\n  </client-only>\n  \n</template>\n\n<style scoped>\n/* container takes the given height */\n</style>\n","<script setup lang=\"ts\">\n// Generic ECharts container. You pass full `option`.\n// Handles client-only lazy import and resize.\nimport type { Ref } from 'vue'\n\nconst props = withDefaults(defineProps<{\n  option: any\n  height?: number | string\n  visible?: boolean\n}>(), {\n  visible: true,\n})\n\nconst chartEl: Ref<HTMLDivElement | null> = ref(null)\nlet chart: any\nlet ro: ResizeObserver | null = null\n\nconst dispose = () => {\n  if (chart) {\n    chart.dispose()\n    chart = null\n  }\n}\n\nconst waitForSize = async () => {\n  if (!process.client || !chartEl.value) return\n  let tries = 0\n  while (chartEl.value && chartEl.value.clientWidth === 0 && tries < 30) {\n    await new Promise((r) => requestAnimationFrame(r))\n    tries++\n  }\n}\n\nconst render = async () => {\n  if (!process.client || !chartEl.value) return\n  if (!props.visible) return\n  const echarts = await import('echarts')\n  await waitForSize()\n  chart = chart || echarts.init(chartEl.value)\n  chart.setOption(props.option, true)\n  chart.resize()\n}\n\nonMounted(() => {\n  if (props.visible) {\n    requestAnimationFrame(() => requestAnimationFrame(() => render()))\n  }\n  const onResize = () => chart && chart.resize()\n  window.addEventListener('resize', onResize)\n  if ('ResizeObserver' in window && chartEl.value) {\n    ro = new ResizeObserver(() => chart && chart.resize())\n    ro.observe(chartEl.value)\n  }\n  onUnmounted(() => {\n    window.removeEventListener('resize', onResize)\n    if (ro) ro.disconnect()\n    dispose()\n  })\n})\n\nwatch(\n  () => props.option,\n  () => render(),\n  { deep: true }\n)\n\nwatch(\n  () => props.visible,\n  async (v) => {\n    if (!process.client) return\n    if (v) {\n      await nextTick()\n      requestAnimationFrame(() => requestAnimationFrame(() => render()))\n    }\n  }\n)\n\n// Clean up on Vite HMR\nif (import.meta && (import.meta as any).hot) {\n  ;(import.meta as any).hot.dispose(() => dispose())\n}\n</script>\n\n<template>\n  <client-only>\n    <div ref=\"chartEl\" :style=\"{ height: (height ?? 260) + 'px', width: '100%' }\" />\n  </client-only>\n</template>\n\n<style scoped>\n</style>\n","import { createError } from \"../composables/error.js\";\nconst intervalError = \"[nuxt] `setInterval` should not be used on the server. Consider wrapping it with an `onNuxtReady`, `onBeforeMount` or `onMounted` lifecycle hook, or ensure you only call it in the browser by checking `import.meta.client`.\";\nexport const setInterval = import.meta.client ? globalThis.setInterval : () => {\n  if (import.meta.dev) {\n    throw createError({\n      statusCode: 500,\n      message: intervalError\n    });\n  }\n  console.error(intervalError);\n};\n","<script setup lang=\"ts\">\nconst route = useRoute()\nconst code = computed(() => String(route.params.code || ''))\n\ntype RangeKey = 'ytd' | '1m' | '3m' | '6m' | '1y'\nconst ranges: { key: RangeKey; label: string }[] = [\n  { key: 'ytd', label: '今年来' },\n  { key: '1m', label: '近1月' },\n  { key: '3m', label: '近3月' },\n  { key: '6m', label: '近6月' },\n  { key: '1y', label: '近1年' },\n]\nconst range = ref<RangeKey>('1y')\nconst showBench = ref(true)\nconst activeTab = ref<'trend' | 'drawdown' | 'nav' | 'volume'>('trend')\nconst autoRefresh = ref(false)\nconst REFRESH_MS = 5000\n\nconst { data, pending, refresh } = await useFetch(() => `/api/fund/${code.value}` as const, {\n  query: { range },\n  watch: [range, code],\n})\n\nconst x = computed(() => data.value?.chart.x ?? [])\nconst perfSeries = computed(() => {\n  const fund = data.value?.chart.fund ?? []\n  const bench = data.value?.chart.bench ?? []\n  const list = [\n    { name: '本基金', data: fund, color: '#ff4d4f', area: true },\n  ] as any[]\n  if (showBench.value) list.push({ name: '沪深300', data: bench, color: '#2f88ff' })\n  return list\n})\n\nconst ddSeries = computed(() => [{\n  name: '最大回撤',\n  data: data.value?.chart.drawdown ?? [],\n  color: '#ff7a45',\n  area: true,\n}])\n\nconst navOption = computed(() => {\n  const nav = data.value?.chart.nav ?? []\n  return {\n    grid: { left: 12, right: 12, top: 16, bottom: 24, containLabel: true },\n    tooltip: { trigger: 'axis', valueFormatter: (v: number) => v.toFixed(4) },\n    xAxis: { type: 'category', boundaryGap: false, data: x.value, axisLine: { show: false }, axisTick: { show: false }, axisLabel: { color: '#999' } },\n    yAxis: { type: 'value', axisLabel: { color: '#999' }, splitLine: { lineStyle: { color: '#eee' } } },\n    series: [{ type: 'line', data: nav, smooth: true, symbol: 'none', lineStyle: { width: 2, color: '#2f88ff' } }],\n  }\n})\n\nconst volOption = computed(() => {\n  const vol = data.value?.chart.volume ?? []\n  return {\n    grid: { left: 12, right: 12, top: 16, bottom: 24, containLabel: true },\n    tooltip: { trigger: 'axis', valueFormatter: (v: number) => `${v.toFixed(0)}k` },\n    xAxis: { type: 'category', data: x.value, axisLabel: { color: '#999' }, axisTick: { show: false }, axisLine: { show: false } },\n    yAxis: { type: 'value', axisLabel: { color: '#999', formatter: '{value}k' }, splitLine: { lineStyle: { color: '#eee' } } },\n    series: [{ type: 'bar', data: vol, itemStyle: { color: '#91cc75' }, barMaxWidth: 10 }],\n  }\n})\n\n// Back helper\nconst onBack = () => history.length > 1 ? history.back() : navigateTo('/')\n\n// Auto refresh timer for hot update\nlet timer: any = null\nconst stopTimer = () => { if (timer) { clearInterval(timer); timer = null } }\nwatch(autoRefresh, (v) => {\n  stopTimer()\n  if (v) timer = setInterval(() => refresh(), REFRESH_MS)\n})\nonUnmounted(() => stopTimer())\n</script>\n\n<template>\n  <div class=\"page\">\n    <van-nav-bar title=\"基金详情\" left-arrow @click-left=\"onBack\" />\n\n    <!-- 基本信息 -->\n    <div class=\"card header\">\n      <div class=\"title\">{{ data?.info.name }}<span class=\"code\">{{ data?.info.code }}</span></div>\n      <div class=\"tags\">\n        <van-tag type=\"primary\" plain round>场内交易</van-tag>\n        <van-tag plain round>股票指数</van-tag>\n      </div>\n      <div class=\"kpis\">\n        <div class=\"kpi\">\n          <div class=\"value neg\">{{ (data?.info.dayChangePct ?? 0).toFixed(2) }}%</div>\n          <div class=\"label\">日涨跌幅</div>\n        </div>\n        <div class=\"kpi\">\n          <div class=\"value\">{{ (data?.info.ytdPct ?? 0).toFixed(2) }}%</div>\n          <div class=\"label\">今年以来</div>\n        </div>\n        <div class=\"kpi\">\n          <div class=\"value neg\">{{ (data?.info.sinceInceptionAnnualPct ?? 0).toFixed(2) }}%</div>\n          <div class=\"label\">成立来年化</div>\n        </div>\n        <div class=\"kpi\">\n          <div class=\"value\">{{ (data?.info.latestNav ?? 0).toFixed(4) }}</div>\n          <div class=\"label\">最新净值</div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 业绩走势 -->\n    <div class=\"card\">\n      <div class=\"tabs\">\n        <div class=\"toolbar\">\n          <div class=\"spacer\"></div>\n          <div class=\"rt\">\n            <span class=\"label\">实时更新</span>\n            <van-switch v-model=\"autoRefresh\" size=\"20\" />\n          </div>\n        </div>\n        <van-tabs v-model:active=\"activeTab\" shrink sticky :offset-top=\"46\" :lazy-render=\"false\">\n          <van-tab name=\"trend\" title=\"业绩走势\">\n            <div class=\"tab-head\">\n              <van-checkbox v-model=\"showBench\" shape=\"square\" icon-size=\"16\">\n                沪深300\n              </van-checkbox>\n            </div>\n            <FundLineChart :x=\"x\" :series=\"perfSeries\" :height=\"260\" :visible=\"activeTab === 'trend'\" />\n          </van-tab>\n          <van-tab name=\"drawdown\" title=\"回撤\">\n            <FundLineChart :x=\"x\" :series=\"ddSeries\" :height=\"260\" :visible=\"activeTab === 'drawdown'\" />\n          </van-tab>\n          <van-tab name=\"nav\" title=\"净值\">\n            <EChartBase :option=\"navOption\" :height=\"260\" :visible=\"activeTab === 'nav'\" />\n          </van-tab>\n          <van-tab name=\"volume\" title=\"成交量\">\n            <EChartBase :option=\"volOption\" :height=\"260\" :visible=\"activeTab === 'volume'\" />\n          </van-tab>\n        </van-tabs>\n      </div>\n\n      <div class=\"range\">\n        <van-button\n          v-for=\"r in ranges\"\n          :key=\"r.key\"\n          size=\"small\"\n          round\n          :type=\"range === r.key ? 'primary' : 'default'\"\n          plain\n          @click=\"range = r.key\"\n        >\n          {{ r.label }}\n        </van-button>\n      </div>\n    </div>\n\n    <div class=\"placeholder\" />\n  </div>\n</template>\n\n<style scoped>\n.page { min-height: 100vh; background: #f7f8fa; }\n.card { margin: 12px; padding: 12px; background: #fff; border-radius: 8px; }\n.header .title { font-weight: 600; font-size: 18px; }\n.header .code { margin-left: 8px; color: #999; font-size: 12px; }\n.tags { margin-top: 6px; display: flex; gap: 6px; }\n.kpis { margin-top: 10px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }\n.kpi { text-align: center; }\n.kpi .value { font-size: 16px; font-weight: 600; color: #07c160; }\n.kpi .value.neg { color: #ff4d4f; }\n.kpi .label { color: #888; font-size: 12px; margin-top: 2px; }\n.section-title { display: flex; justify-content: space-between; align-items: center; font-weight: 600; margin-bottom: 4px; }\n.tabs :deep(.van-tabs__wrap) { border-bottom: 1px solid #f0f0f0; }\n.tab-head { display: flex; justify-content: flex-end; padding: 8px 0; }\n.toolbar { display: flex; align-items: center; padding: 4px 0 8px; }\n.toolbar .spacer { flex: 1; }\n.toolbar .rt { display: flex; align-items: center; gap: 6px; color: #666; }\n.toolbar .label { font-size: 12px; }\n.range { display: flex; gap: 8px; justify-content: space-between; padding: 8px 0 0; }\n.placeholder { height: 24px; }\n</style>\n"],"version":3}