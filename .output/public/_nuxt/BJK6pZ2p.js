import{d as S,r as u,y as p,C as a,A as _,D as s,G as r,g as n,z as v,I as i,R as U,S as N,E as f,B as z,q as g,T as y,_ as D}from"#entry";const E={class:"page"},I={class:"content"},L={class:"actions"},P=S({__name:"feedback",setup(R){const d=u(""),t=u("功能建议"),l=u(""),c=u(!1),b=["功能建议","数据问题","Bug反馈","其他"],V=async()=>{if(!l.value.trim())return y("请填写问题描述");c.value=!0;try{(await $fetch("/api/feedback",{method:"POST",body:{contact:d.value,category:t.value,content:l.value},headers:{"content-type":"application/json"}})).ok&&(y("已提交，感谢反馈！"),await new Promise(e=>setTimeout(e,300)),history.length>1?history.back():g("/me"))}finally{c.value=!1}},k=()=>history.length>1?history.back():g("/me");return(h,e)=>{const w=n("van-nav-bar"),x=n("van-radio"),B=n("van-radio-group"),m=n("van-field"),C=n("van-cell-group"),T=n("van-button");return v(),p("div",E,[a(w,{title:"意见反馈","left-arrow":"",onClickLeft:k}),_("div",I,[a(C,{inset:""},{default:s(()=>[a(m,{modelValue:r(t),"onUpdate:modelValue":e[1]||(e[1]=o=>i(t)?t.value=o:null),label:"类型"},{input:s(()=>[a(B,{modelValue:r(t),"onUpdate:modelValue":e[0]||(e[0]=o=>i(t)?t.value=o:null),direction:"horizontal"},{default:s(()=>[(v(),p(U,null,N(b,o=>a(x,{key:o,name:o},{default:s(()=>[f(z(o),1)]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),a(m,{modelValue:r(l),"onUpdate:modelValue":e[2]||(e[2]=o=>i(l)?l.value=o:null),type:"textarea",rows:"5",label:"描述",placeholder:"请详细描述你的问题或建议"},null,8,["modelValue"]),a(m,{modelValue:r(d),"onUpdate:modelValue":e[3]||(e[3]=o=>i(d)?d.value=o:null),label:"联系方式",placeholder:"选填：手机号/微信/邮箱"},null,8,["modelValue"])]),_:1}),_("div",L,[a(T,{type:"primary",block:"",round:"",loading:r(c),onClick:V},{default:s(()=>[...e[4]||(e[4]=[f("提交",-1)])]),_:1},8,["loading"])])])])}}}),q=D(P,[["__scopeId","data-v-c4576748"]]);export{q as default};
