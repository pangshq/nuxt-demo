{"version":3,"file":"feedback-CGIFJJuV.js","sources":["../../../../../../../pages/me/feedback.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { showToast } from 'vant'\nconst contact = ref('')\nconst category = ref('功能建议')\nconst content = ref('')\nconst loading = ref(false)\n\nconst categories = ['功能建议', '数据问题', 'Bug反馈', '其他']\n\nconst onSubmit = async () => {\n  if (!content.value.trim()) {\n    return showToast('请填写问题描述')\n  }\n  loading.value = true\n  try {\n    const res = await $fetch<{ ok: boolean; id: string }>(\n      '/api/feedback',\n      {\n        method: 'POST',\n        body: { contact: contact.value, category: category.value, content: content.value },\n        headers: { 'content-type': 'application/json' },\n      }\n    )\n    if (res.ok) {\n      showToast('已提交，感谢反馈！')\n      await new Promise((r) => setTimeout(r, 300))\n      history.length > 1 ? history.back() : navigateTo('/me')\n    }\n  } finally {\n    loading.value = false\n  }\n}\n\nconst onBack = () => history.length > 1 ? history.back() : navigateTo('/me')\n</script>\n\n<template>\n  <div class=\"page\">\n    <van-nav-bar title=\"意见反馈\" left-arrow @click-left=\"onBack\" />\n    <div class=\"content\">\n      <van-cell-group inset>\n        <van-field v-model=\"category\" label=\"类型\">\n          <template #input>\n            <van-radio-group v-model=\"category\" direction=\"horizontal\">\n              <van-radio v-for=\"c in categories\" :key=\"c\" :name=\"c\">{{ c }}</van-radio>\n            </van-radio-group>\n          </template>\n        </van-field>\n        <van-field v-model=\"content\" type=\"textarea\" rows=\"5\" label=\"描述\" placeholder=\"请详细描述你的问题或建议\" />\n        <van-field v-model=\"contact\" label=\"联系方式\" placeholder=\"选填：手机号/微信/邮箱\" />\n      </van-cell-group>\n      <div class=\"actions\">\n        <van-button type=\"primary\" block round :loading=\"loading\" @click=\"onSubmit\">提交</van-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.page { min-height: 100vh; background: #f7f8fa; }\n.content { padding: 16px; }\n.actions { margin: 24px 16px 0; }\n</style>\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_push","_parent","_unref","_","_scopeId","_ssrRenderList","_createBlock","_Fragment","_renderList","_createVNode"],"mappings":"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"}